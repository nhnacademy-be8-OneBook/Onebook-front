<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Meta Tag -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name='copyright' content=''>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Title Tag  -->
    <title>Eshop - eCommerce HTML5 Template.</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <!-- Web Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">

    <!-- StyleSheet -->
    <!-- Bootstrap -->
    <link rel="stylesheet" href="/css/bootstrap.css">
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="/css/magnific-popup.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/css/font-awesome.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css">
    <!-- Themify Icons -->
    <link rel="stylesheet" href="/css/themify-icons.css">
    <!-- Jquery Ui -->
    <link rel="stylesheet" href="/css/jquery-ui.css">
    <!-- Nice Select CSS -->
    <link rel="stylesheet" href="/css/niceselect.css">
    <!-- Animate CSS -->
    <link rel="stylesheet" href="/css/animate.css">
    <!-- Flex Slider CSS -->
    <link rel="stylesheet" href="/css/flex-slider.min.css">
    <!-- Owl Carousel -->
    <link rel="stylesheet" href="/css/owl-carousel.css">
    <!-- Slicknav -->
    <link rel="stylesheet" href="/css/slicknav.min.css">

    <!-- Eshop StyleSheet -->
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/css/responsive.css">

    <!-- Color CSS -->
    <link rel="stylesheet" href="/css/color/color1.css">
    <link rel="stylesheet" href="#" id="colors">

    <style>
        .fixed-size-img {
            width: 80px;
            height: auto;
        }
        .content-container {
            padding-left: 45px;
            padding-top: 50px;
            padding-bottom: 30px;
        }
        .btn-primary {
            background-color: #f8f9fa;
            color: #000000;
            border-color: #000000;
        }
        .btn-primary:hover {
            background-color: #ffd700;
            color: #000000;
            border-color: #ffd700;
        }
        table.table td, table.table th {
            text-align: center;
            vertical-align: middle;
        }
        /* 내가 작성한 리뷰 목록 스타일 */
        .review-block {
            display: grid;
            grid-template-columns: auto 1fr;
            grid-template-rows: auto auto auto;
            grid-gap: 10px;
            border-bottom: 1px solid #ddd;
            padding: 15px 0;
        }
        .book-image {
            grid-row: 1 / span 2;
            grid-column: 1;
            width: 80px;
            height: auto;
            margin-right: 15px;
            align-self: start;
        }
        .book-title {
            grid-row: 1;
            grid-column: 2;
            align-self: center;
        }
        .book-title a {
            font-size: 1.2em;
            font-weight: bold;
            text-decoration: none;
            color: #333;
        }
        .meta-info {
            grid-row: 2;
            grid-column: 2;
            color: #555;
            display: flex;
            align-items: center;
            font-size: 0.9em;
        }
        .stars {
            color: #FFD700;
            margin-right: 10px;
        }
        .fixed-width {
            display: inline-block;
            width: 120px;
            vertical-align: middle;
        }
        .timestamp {
            margin-left: 10px;
        }
        .review-content {
            grid-row: 3;
            grid-column: 1 / span 2;
            line-height: 1.5;
            position: relative;
            margin-top: 10px;
        }
        .toggle-more-btn {
            background: #eee;
            border: none;
            color: #333;
            padding: 3px 5px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>

</head>
<body class="js">

<!-- Preloader -->
<div class="preloader">
    <div class="preloader-inner">
        <div class="preloader-icon">
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<!-- End Preloader -->

<div th:replace="~{fragments/header :: header}"></div>

<!-- Breadcrumbs -->
<div class="breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="bread-inner">
                    <ul class="bread-list">
                        <li><a href="index1.html">Home<i class="ti-arrow-right"></i></a></li>
                        <li class="active"><a href="blog-single.html">Shop Grid</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Breadcrumbs -->

<!-- 마이페이지 영역 시작 -->
<section class="product-area shop-sidebar shop section">
    <div class="container">
        <div class="row">
            <!-- 사이드바 -->
            <div class="col-lg-3 col-md-4 col-12">
                <div class="shop-sidebar">
                    <!-- Single Widget -->
                    <div class="single-widget category" style="border-radius: 10px">
                        <a href="/my/home" class="title-line" style="text-align: center">
                            <h4>마이 페이지</h4>
                        </a>
                        <br/>
                        <br/>
                        <h3 class="title">쇼핑 정보</h3>
                        <ul class="categor-list">
                            <li><a href="/my/orders">주문 목록/배송 조회</a></li>
                            <li><a href="#">취소/반품/교환 내역</a></li>
                            <li><a href="#">찜한 상품</a></li>
                        </ul>
                        <br/>
                        <br/>
                        <h3 class="title">혜택 관리</h3>
                        <ul class="categor-list">
                            <li><a href="#">쿠폰</a></li>
                            <li><a href="#">포인트</a></li>
                        </ul>
                        <br/>
                        <br/>
                        <h3 class="title">리뷰</h3>
                        <ul class="categor-list">
                            <li><a href="/review/pending">작성 가능한 리뷰</a></li>
                            <li><a href="/review/my-review">내가 작성한 리뷰</a></li>
                        </ul>
                        <br/>
                        <br/>
                        <h3 class="title">회원 정보</h3>
                        <ul class="categor-list">
                            <li><a href="/my/member/modify-validate">회원정보 수정</a></li>
                            <li><a href="/my/member/grade">회원 등급</a></li>
                            <li><a href="/addresses">주소 관리</a></li>
                            <li><a href="/my/member/leave-validate">회원 탈퇴</a></li>
                        </ul>
                    </div>
                    <!--/ End Single Widget -->
                </div>
            </div>

            <!-- 본문 영역: 내가 작성한 리뷰 목록 뷰 -->
            <div class="col-lg-9 col-md-8 col-12">
                <div class="shop-top" style="border-radius: 10px;">
                    <div class="content-container">
                        <h4>내가 작성한 리뷰 목록</h4>

                        <div th:if="${#lists.isEmpty(myReviews)}">
                            <p>작성한 리뷰가 없습니다.</p>
                        </div>

                        <div th:unless="${#lists.isEmpty(myReviews)}">
                            <div th:each="review : ${myReviews}" class="review-block">
                                <!-- 도서 이미지 -->
                                <img th:src="${review.bookImageUrl != null ? review.bookImageUrl : '/images/no_image.png'}"
                                     alt="Book Image" class="book-image" />

                                <!-- 도서 제목 -->
                                <div class="book-title">
                                    <a th:href="@{/book/bookDetail(bookId=${review.bookId})}"
                                       th:text="${review.bookName}">책 제목</a>
                                </div>

                                <!-- 평점과 작성일시 -->
                                <div class="meta-info">
                                    <span class="stars fixed-width" th:if="${review.grade > 0}">
                                        <span th:each="star : ${#numbers.sequence(1, review.grade)}">
                                            <i class="fa fa-star"></i>
                                        </span>
                                    </span>
                                    <span class="fixed-width" th:if="${review.grade == 0}">평점 없음</span>
                                    <span class="timestamp" th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd HH:mm')}"></span>
                                </div>

                                <!-- 리뷰 내용 (100자 초과 시 더보기/접기 버튼 추가) -->
                                <div class="review-content" th:if="${review.description != null}">
                                    <span class="short-text"
                                          th:text="${review.description.length() > 100 ? review.description.substring(0, 100) + '...' : review.description}">
                                    </span>
                                    <span class="full-text" style="display:none"
                                          th:text="${review.description}"></span>
                                    <button class="toggle-more-btn" th:if="${review.description.length() > 100}">더보기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 본문 영역 끝 -->
        </div>
    </div>
</section>
<!-- 마이페이지 영역 끝 -->

<!-- Start Footer Area -->
<footer class="footer">
    <!-- Footer Top -->
    <div class="footer-top section">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer about">
                        <div class="logo">
                            <a href="index.html"><img src="/images/logo2.png" alt="#"></a>
                        </div>
                        <p class="text">Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue,  magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus.</p>
                        <p class="call">Got Question? Call us 24/7<span><a href="tel:123456789">+0123 456 789</a></span></p>
                    </div>
                    <!-- End Single Widget -->
                </div>
                <div class="col-lg-2 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer links">
                        <h4>Information</h4>
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Faq</a></li>
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Help</a></li>
                        </ul>
                    </div>
                    <!-- End Single Widget -->
                </div>
                <div class="col-lg-2 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer links">
                        <h4>Customer Service</h4>
                        <ul>
                            <li><a href="#">Payment Methods</a></li>
                            <li><a href="#">Money-back</a></li>
                            <li><a href="#">Returns</a></li>
                            <li><a href="#">Shipping</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                        </ul>
                    </div>
                    <!-- End Single Widget -->
                </div>
                <div class="col-lg-3 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer social">
                        <h4>Get In Tuch</h4>
                        <!-- Single Widget -->
                        <div class="contact">
                            <ul>
                                <li>NO. 342 - London Oxford Street.</li>
                                <li>012 United Kingdom.</li>
                                <li>info@eshop.com</li>
                                <li>+032 3456 7890</li>
                            </ul>
                        </div>
                        <!-- End Single Widget -->
                        <ul>
                            <li><a href="#"><i class="ti-facebook"></i></a></li>
                            <li><a href="#"><i class="ti-twitter"></i></a></li>
                            <li><a href="#"><i class="ti-flickr"></i></a></li>
                            <li><a href="#"><i class="ti-instagram"></i></a></li>
                        </ul>
                    </div>
                    <!-- End Single Widget -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Footer Top -->
    <div class="copyright">
        <div class="container">
            <div class="inner">
                <div class="row">
                    <div class="col-lg-6 col-12">
                        <div class="left">
                            <p>Copyright © 2020 <a href="http://www.wpthemesgrid.com" target="_blank">Wpthemesgrid</a>  -  All Rights Reserved.</p>
                        </div>
                    </div>
                    <div class="col-lg-6 col-12">
                        <div class="right">
                            <img src="/images/payments.png" alt="#">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- /End Footer Area -->

<!-- Jquery -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-migrate-3.0.0.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<!-- Popper JS -->
<script src="/js/popper.min.js"></script>
<!-- Bootstrap JS -->
<script src="/js/bootstrap.min.js"></script>
<!-- Color JS -->
<script src="/js/colors.js"></script>
<!-- Slicknav JS -->
<script src="/js/slicknav.min.js"></script>
<!-- Owl Carousel JS -->
<script src="/js/owl-carousel.js"></script>
<!-- Magnific Popup JS -->
<script src="/js/magnific-popup.js"></script>
<!-- Fancybox JS -->
<script src="/js/facnybox.min.js"></script>
<!-- Waypoints JS -->
<script src="/js/waypoints.min.js"></script>
<!-- Countdown JS -->
<script src="/js/finalcountdown.min.js"></script>
<!-- Nice Select JS -->
<script src="/js/nicesellect.js"></script>
<!-- Ytplayer JS -->
<script src="/js/ytplayer.min.js"></script>
<!-- Flex Slider JS -->
<script src="/js/flex-slider.js"></script>
<!-- ScrollUp JS -->
<script src="/js/scrollup.js"></script>
<!-- Onepage Nav JS -->
<script src="/js/onepage-nav.min.js"></script>
<!-- Easing JS -->
<script src="/js/easing.js"></script>
<!-- Active JS -->
<script src="/js/active.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll('.toggle-more-btn').forEach(function(button) {
            button.addEventListener('click', function(){
                let container = this.closest('.review-content');
                let shortText = container.querySelector('.short-text');
                let fullText = container.querySelector('.full-text');
                if(this.textContent === '더보기') {
                    shortText.style.display = 'none';
                    fullText.style.display = 'inline';
                    this.textContent = '접기';
                } else {
                    shortText.style.display = 'inline';
                    fullText.style.display = 'none';
                    this.textContent = '더보기';
                }
            });
        });
    });
</script>

</body>
</html>
